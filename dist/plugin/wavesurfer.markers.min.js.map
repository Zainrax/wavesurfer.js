{"version":3,"file":"wavesurfer.markers.min.js","mappings":"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","sources":["webpack://WaveSurfer/webpack/universalModuleDefinition","webpack://WaveSurfer/./src/plugin/markers/index.js","webpack://WaveSurfer/webpack/bootstrap","webpack://WaveSurfer/webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"WaveSurfer\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"WaveSurfer\"] = factory();\n\telse\n\t\troot[\"WaveSurfer\"] = root[\"WaveSurfer\"] || {}, root[\"WaveSurfer\"][\"markers\"] = factory();\n})(self, () => {\nreturn ","\n/**\n * @typedef {Object} MarkerParams\n * @desc The parameters used to describe a marker.\n * @example wavesurfer.addMarker(regionParams);\n * @property {number} time The time to set the marker at\n * @property {?label} string An optional marker label\n * @property {?color} string Background color for marker\n * @property {?position} string \"top\" or \"bottom\", defaults to \"bottom\"\n * @property {?markerElement} element An HTML element to display instead of the default marker image\n */\n\n\n/**\n * Markers are points in time in the audio that can be jumped to.\n *\n * @implements {PluginClass}\n *\n * @example\n * import MarkersPlugin from 'wavesurfer.markers.js';\n *\n * // if you are using <script> tags\n * var MarkerPlugin = window.WaveSurfer.markers;\n *\n * // ... initialising wavesurfer with the plugin\n * var wavesurfer = WaveSurfer.create({\n *   // wavesurfer options ...\n *   plugins: [\n *     MarkersPlugin.create({\n *       // plugin options ...\n *     })\n *   ]\n * });\n */\n\nconst DEFAULT_FILL_COLOR = \"#D8D8D8\";\nconst DEFAULT_POSITION = \"bottom\";\n\nexport default class MarkersPlugin {\n    /**\n     * @typedef {Object} MarkersPluginParams\n     * @property {?MarkerParams[]} markers Initial set of markers\n     * @fires MarkersPlugin#marker-click\n     */\n\n    /**\n     * Markers plugin definition factory\n     *\n     * This function must be used to create a plugin definition which can be\n     * used by wavesurfer to correctly instantiate the plugin.\n     *\n     * @param {MarkersPluginParams} params parameters use to initialise the plugin\n     * @since 4.6.0\n     * @return {PluginDefinition} an object representing the plugin\n     */\n    static create(params) {\n        return {\n            name: 'markers',\n            deferInit: params && params.deferInit ? params.deferInit : false,\n            params: params,\n            staticProps: {\n                addMarker(options) {\n                    if (!this.initialisedPluginList.markers) {\n                        this.initPlugin('markers');\n                    }\n                    return this.markers.add(options);\n                },\n                clearMarkers() {\n                    this.markers && this.markers.clear();\n                }\n            },\n            instance: MarkersPlugin\n        };\n    }\n\n    constructor(params, ws) {\n        this.params = params;\n        this.wavesurfer = ws;\n        this.util = ws.util;\n        this.style = this.util.style;\n        this.markerWidth = 11;\n        this.markerHeight = 22;\n\n\n        this._onResize = () => {\n            this._updateMarkerPositions();\n        };\n\n        this._onBackendCreated = () => {\n            this.wrapper = this.wavesurfer.drawer.wrapper;\n            if (this.params.markers) {\n                this.params.markers.forEach(marker => this.add(marker));\n            }\n            window.addEventListener('resize', this._onResize, true);\n            window.addEventListener('orientationchange', this._onResize, true);\n            this.wavesurfer.on('zoom', this._onResize);\n        };\n\n        this.markers = [];\n        this._onReady = () => {\n            this.wrapper = this.wavesurfer.drawer.wrapper;\n            this._updateMarkerPositions();\n        };\n    }\n\n    init() {\n        // Check if ws is ready\n        if (this.wavesurfer.isReady) {\n            this._onBackendCreated();\n            this._onReady();\n        } else {\n            this.wavesurfer.once('ready', this._onReady);\n            this.wavesurfer.once('backend-created', this._onBackendCreated);\n        }\n    }\n\n    destroy() {\n        this.wavesurfer.un('ready', this._onReady);\n        this.wavesurfer.un('backend-created', this._onBackendCreated);\n\n        this.wavesurfer.un('zoom', this._onResize);\n\n        window.removeEventListener('resize', this._onResize, true);\n        window.removeEventListener('orientationchange', this._onResize, true);\n\n        this.clear();\n    }\n\n    /**\n     * Add a marker\n     *\n     * @param {MarkerParams} params Marker definition\n     * @return {object} The created marker\n     */\n    add(params) {\n        let marker = {\n            time: params.time,\n            label: params.label,\n            color: params.color || DEFAULT_FILL_COLOR,\n            position: params.position || DEFAULT_POSITION\n        };\n\n        if (params.markerElement) {\n            this.markerWidth = params.markerElement.width;\n            this.markerHeight = params.markerElement.height;\n        }\n\n        marker.el = this._createMarkerElement(marker, params.markerElement);\n\n        this.wrapper.appendChild(marker.el);\n        this.markers.push(marker);\n        this._updateMarkerPositions();\n\n        return marker;\n    }\n\n    /**\n     * Remove a marker\n     *\n     * @param {number} index Index of the marker to remove\n     */\n    remove(index) {\n        let marker = this.markers[index];\n        if (!marker) {\n            return;\n        }\n\n        this.wrapper.removeChild(marker.el);\n        this.markers.splice(index, 1);\n    }\n\n    _createPointerSVG(color, position) {\n        const svgNS = \"http://www.w3.org/2000/svg\";\n\n        const el = document.createElementNS(svgNS, \"svg\");\n        const polygon = document.createElementNS(svgNS, \"polygon\");\n\n        el.setAttribute(\"viewBox\", \"0 0 40 80\");\n\n        polygon.setAttribute(\"id\", \"polygon\");\n        polygon.setAttribute(\"stroke\", \"#979797\");\n        polygon.setAttribute(\"fill\", color);\n        polygon.setAttribute(\"points\", \"20 0 40 30 40 80 0 80 0 30\");\n        if ( position == \"top\" ) {\n            polygon.setAttribute(\"transform\", \"rotate(180, 20 40)\");\n        }\n\n        el.appendChild(polygon);\n\n        this.style(el, {\n            width: this.markerWidth + \"px\",\n            height: this.markerHeight + \"px\",\n            \"min-width\": this.markerWidth + \"px\",\n            \"margin-right\": \"5px\",\n            \"z-index\": 4\n        });\n        return el;\n    }\n\n    _createMarkerElement(marker, markerElement) {\n        let label = marker.label;\n        let time = marker.time;\n\n        const el = document.createElement('marker');\n        el.className = \"wavesurfer-marker\";\n\n        this.style(el, {\n            position: \"absolute\",\n            height: \"100%\",\n            display: \"flex\",\n            overflow: \"hidden\",\n            \"flex-direction\": (marker.position == \"top\" ? \"column-reverse\" : \"column\")\n        });\n\n        const line = document.createElement('div');\n        this.style(line, {\n            \"flex-grow\": 1,\n            \"margin-left\": (this.markerWidth / 2 - 0.5) + \"px\",\n            background: \"black\",\n            width: \"1px\",\n            opacity: 0.1\n        });\n        el.appendChild(line);\n\n        const labelDiv = document.createElement('div');\n        const point = markerElement || this._createPointerSVG(marker.color, marker.position);\n        labelDiv.appendChild(point);\n\n        if ( label ) {\n            const labelEl = document.createElement('span');\n            labelEl.innerText = label;\n            this.style(labelEl, {\n                \"font-family\": \"monospace\",\n                \"font-size\": \"90%\"\n            });\n            labelDiv.appendChild(labelEl);\n        }\n\n        this.style(labelDiv, {\n            display: \"flex\",\n            \"align-items\": \"center\",\n            cursor: \"pointer\"\n        });\n\n        el.appendChild(labelDiv);\n\n        labelDiv.addEventListener(\"click\", e => {\n            e.stopPropagation();\n            this.wavesurfer.setCurrentTime(time);\n            this.wavesurfer.fireEvent(\"marker-click\", marker, e);\n        });\n\n        return el;\n    }\n\n    _updateMarkerPositions() {\n        const duration = this.wavesurfer.getDuration();\n\n        for ( let i = 0 ; i < this.markers.length; i++ ) {\n            let marker = this.markers[i];\n            const elementWidth =\n                this.wavesurfer.drawer.width /\n                this.wavesurfer.params.pixelRatio;\n\n            const positionPct = Math.min(marker.time / duration, 1);\n            const leftPx = ((elementWidth * positionPct) - (this.markerWidth / 2));\n            this.style(marker.el, {\n                \"left\":  leftPx + \"px\",\n                \"max-width\": (elementWidth - leftPx) + \"px\"\n            });\n        }\n    }\n\n    /**\n     * Remove all markers\n     */\n    clear() {\n        while ( this.markers.length > 0 ) {\n            this.remove(0);\n        }\n    }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(188);\n"],"names":["root","factory","exports","module","define","amd","self","MarkersPlugin","params","ws","_this","_classCallCheck","this","wavesurfer","util","style","markerWidth","markerHeight","_onResize","_updateMarkerPositions","_onBackendCreated","wrapper","drawer","markers","forEach","marker","add","window","addEventListener","on","_onReady","key","value","name","deferInit","staticProps","addMarker","options","initialisedPluginList","initPlugin","clearMarkers","clear","instance","isReady","once","un","removeEventListener","time","label","color","position","markerElement","width","height","el","_createMarkerElement","appendChild","push","index","removeChild","splice","svgNS","document","createElementNS","polygon","setAttribute","_this2","createElement","className","display","overflow","line","background","opacity","labelDiv","point","_createPointerSVG","labelEl","innerText","cursor","e","stopPropagation","setCurrentTime","fireEvent","duration","getDuration","i","length","elementWidth","pixelRatio","leftPx","Math","min","remove","default","__webpack_module_cache__","__webpack_exports__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__"],"sourceRoot":""}